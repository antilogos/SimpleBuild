const langTranslate=[
	{"_id": "home", 
		"en": "Home", 
		"fr": "Accueil"
	},{"_id": "search", 
		"en": "List", 
		"fr": "Liste"
	},{"_id": "import", 
		"en": "Import", 
		"fr": "Importer"
	},{"_id": "googlesite", 
		"en": "My other site in french &#x1f517;", 
		"fr": "L'autre site &#x1f517;"
	},{"_id": "loading_header", 
		"en": "Loading...", 
		"fr": "Chargement..."
	},{"_id": "import_header", 
		"en": "Import", 
		"fr": "Importer"
	},{"_id": "label_pobcode", 
		"en": "POB code:", 
		"fr": "code POB :"
	},{"_id": "label_submit", 
		"en": "Submit", 
		"fr": "Valider"
	},{"_id": "notes_header", 
		"en": "Concept", 
		"fr": "Concept"
	},{"_id": "gem_header", 
		"en": "Gems", 
		"fr": "Gemmes"
	},{"_id": "group_subheader", 
		"en": "Groups", 
		"fr": "Groupes"
	},{"_id": "configuration_subheader", 
		"en": "Configurations", 
		"fr": "Configurations"
	},{"_id": "roadmap_subheader", 
		"en": "Roadmap", 
		"fr": "Obtentions"
	},{"_id": "tree_header", 
		"en": "Skill tree", 
		"fr": "Talents passifs"
	},{"_id": "preview_subheader", 
		"en": "Preview", 
		"fr": "Prévisualisation"
	},{"_id": "treelist_subheader", 
		"en": "Trees", 
		"fr": "Arbres"
	},{"_id": "ascendancy_subheader", 
		"en": "Asendancies", 
		"fr": "Ascendances"
	},{"_id": "mastery_subheader", 
		"en": "Masteries", 
		"fr": "Maîtrises"
	},{"_id": "keystone_subheader", 
		"en": "Keystone", 
		"fr": "Charnières"
	},{"_id": "pathway_subheader", 
		"en": "Pathway", 
		"fr": "Cheminement"
	},{"_id": "item_header", 
		"en": "Items", 
		"fr": "Objets"
	},{"_id": "set_subheader", 
		"en": "Items Sets", 
		"fr": "Ensemble d'équipements"
	},{"_id": "jewelTree_subheader", 
		"en": "Jewels", 
		"fr": "Joyaux"
	},{"_id": "jewelAbyss_subheader", 
		"en": "Jewels on equipment", 
		"fr": "Joyaux sur l'équipement"
	},{"_id": "weaponswap_subheader", 
		"en": "Weapon swap", 
		"fr": "Configuration d'arme secondaire"
	},{"_id": "criteria_header", 
		"en": "Search tags", 
		"fr": "Critères de recherche"
	},{"_id": "result_header", 
		"en": "Results", 
		"fr": "Résultats"
	},{"_id": "complement_gem_option", 
		"en": " (optionnal)", 
		"fr": " (optionnel)"
	},{"_id": "label_default_title", 
		"en": "default", 
		"fr": "par défaut"
	},{"_id": "complement_tree_points", 
		"en": " points", 
		"fr": " points"
	},{"_id": "label_footer", 
		"en": "This site is fan made and isn't official. It isn't affiliated with or endorsed by Grinding Gear Games in any way.", 
		"fr": "Ce site est réalisé par un fan et n'est pas officiel. Il n'est pas affilié à ou approuvé par Grinding Gear Game."
	},{"_id": "label_quest_lyoneye", 
		"en": "Enter Lyoneye's Watch", 
		"fr": "Arrivé au Guet"
	},{"_id": "label_quest_submerged", 
		"en": "Enter Submerged passage", 
		"fr": "Arrivé aux Souterrains"
	},{"_id": "label_quest_prison", 
		"en": "Enter Axiom's prison", 
		"fr": "Arrivé à la Prison"
	},{"_id": "label_quest_brutus", 
		"en": "Kill Brutus", 
		"fr": "Tuer Brutus"
	},{"_id": "label_quest_cavern", 
		"en": "Enter Merveil's Caverns", 
		"fr": "Arrivé aux Cavernes"
	},{"_id": "label_quest_balefulgem", 
		"en": "Pickup the Baleful Gem", 
		"fr": "Récupérer Gemme maléfique"
	},{"_id": "label_quest_maligarospike", 
		"en": "Pickup Maligaro's spike", 
		"fr": "Récupérer Pic de Maligaro"
	},{"_id": "label_quest_tolman", 
		"en": "Pickup Tolman's bracelet", 
		"fr": "Récupérer Bracelet de Tolman"
	},{"_id": "label_quest_gravicius", 
		"en": "Kill Gravicius", 
		"fr": "Tuer Gravicius"
	},{"_id": "label_quest_archives", 
		"en": "Pickup the golden pages", 
		"fr": "Récupérer les pages des archives"
	},{"_id": "label_quest_mines", 
		"en": "Enter the mines", 
		"fr": "Arrivé aux Mines"
	},{"_id": "label_quest_belly", 
		"en": "Enter the belly of the beast", 
		"fr": "Arrivé aux Entrailles"
	},{"_id": "label_quest_droponly", 
		"en": "Drop only", 
		"fr": "Uniquement en butin"
	},{"_id": "label_quest_vaal", 
		"en": "In Vaal area or Corruption effect", 
		"fr": "Dans les zones vaal ou effet de Corruption"
	},{"_id": "label_quest_alternate", 
		"en": "By completing unsual gems's blueprint", 
		"fr": "Dans les plans de gemmes inhabituelles"
	},{"_id": "label_quest_awakened", 
		"en": "In Maven's crucible", 
		"fr": "Dans le creuset de la Prodige"
	},{"_id": "label_quest_outofclass", 
		"en": "Out of class", 
		"fr": "Hors classe"
	},{"_id": "history_subheader", 
		"en": "History", 
		"fr": "Historique"
	},{"_id": "seriesearch_subheader", 
		"en": "Serie", 
		"fr": "Série"
	},{"_id": "classsearch_subheader", 
		"en": "Class", 
		"fr": "Classe"
	},{"_id": "tagsearch_subheader", 
		"en": "Tag", 
		"fr": "Tag"
	},{"_id": "import_helptext", 
		"en": "You did not provide the pob code. Copy the pob code from your url (a frame is available opposite) into the form. The image will show you where you can find the pob code.", 
		"fr": "Vous n'avez pas renseigné un code pob. Copiez le code depuis l'url que vous avez fourni (un cadre est disponible ci-contre) dans le formulaire. L'image indique où trouver le code pob."
	},{"_id": "info_header", 
		"en": "About", 
		"fr": "À Propos"
	},{"_id": "info_content", 
		"en": "This site allow you to visualize code from Path of Building, and browse those I have approved of. It currently does not completly support French and does not support description for support gem, and does not compute stats like would do poe.ninja or pobb.in. It's mainly here for visual convenience and displaying builds from my community.", 
		"fr": "Ce site vous permet de visualiser des codes de Path of Building et de parcourir ceux que j'ai approuvé. Il ne supporte pas complètement la langue Française ni la description des gemmes de soutien, et ne fait aucun calcul de caractérisitques comme poe.ninja ou pobb.in. Il sert principalement comme une alternative plus visuelle et pour montrer les constructions de ma communauté."
	},{"_id": "contribute_header", 
		"en": "Contribute", 
		"fr": "Contribuer"
	},{"_id": "contribute_content", 
		"en": "If you want to submit content, you can send a PoB code as a merge request on the github (file to modify: dat/Dat_ListBuild.js) or contact me via <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfB4wQkVmWikMUyYxz3iicEOlOZ8IDwovzC3-3yoqoTTOYDIw/viewform?usp=sf_link\">google form</a> or <a href=\"https://discord.gg/brNDd44\">discord</a>.</br>Notes in Path of building are used to inject text in the different part of a build display, using a specific line starting code: </br>«#_gem_X_Y_Z», where X is the index of the <b>Skill set</b>, Y the index of the <b>Socket group</b>, and Z the index of the gem (_Y and _Z are optionnal if you want a title for a group or skill set)</br>«#_node_X», where X is the id of the <b>tree node</b>()</br>«#_mastery_X», where X is the id of the <b>mastery choice</b>()</br>«#_item_X», where X is the index of the item in the <b>All items</b> list.<br />End of such line must end with «#_». Colours code are kept.",
		"fr": "Si vous voulez sousmettre votre propre contenu, vous pouvez m'envoyer un code PoB en tant que <i>merge request</i> sur le github (fichier à modifer: dat/Dat_ListBuild.js) ou me contacter par <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfB4wQkVmWikMUyYxz3iicEOlOZ8IDwovzC3-3yoqoTTOYDIw/viewform?usp=sf_link\">formulaire google</a> ou <a href=\"https://discord.gg/brNDd44\">discord</a>.</br>La partie Notes dans Path of Building est utilisé pour injecter du texte à differents endroits de la présentation du personnage, en utilisant des codes en début de ligne: </br>«#_gem_X_Y_Z», où X est l'index du <b>Skill set</b>, Y celui du <b>Socket group</b>, et Z l'index de la gemme (_Y et _Z sont optionnels si vous voulez ajouter des titres sur les groupes ou skill set)</br>«#_node_X», où X est l'identifiant du <b>point de talent passif de l'arbre</b>()</br>«#_mastery_X», où X est l'identifiant de la <b>maîtrise choisie</b>()</br>«#_item_X», où X est l'index de l'objet dans la liste <b>All items</b>.<br />Les lignes de ce genre doivent terminer par «#_». Les codes couleurs sont conservés."
	},{"_id": "about_header", 
		"en": "Sources", 
		"fr": "Sources"
	},{"_id": "about_content", 
		"en": "This site is directly hosted on <a href=\"https://github.com/antilogos/SimpleBuild\">github</a> by github.io.<br />This site use data from <a href=\"https://github.com/brather1ng/RePoE\">RePoE</a> and <a href=\"http://poe.ninja/\">poe.ninja</a>, and the framework <a href=\"https://github.com/meta-is-beta/horadric-helper\">Horadric Helper</a> for displaying item.<br />PoB code comes from and are used with the software <a href=\"https://pathofbuilding.community\">Path of building community project</a>.", 
		"fr": "Ce site est directement hébergé sur <a href=\"https://github.com/antilogos/SimpleBuild\">github</a> par github.io.<br />Ce site utilise des données provenant de <a href=\"https://github.com/brather1ng/RePoE\">RePoE</a> et <a href=\"http://poe.ninja/\">poe.ninja</a> et utilise aussi le framework <a href=\"https://github.com/meta-is-beta/horadric-helper\">Horadric Helper</a> pour l'affichage des objets.<br />Les codes PoB proviennent et sont utilisés par le logiciel <a href=\"https://pathofbuilding.community\">Path of building community</a>."
	}
]
const dynamicDico = {
	"tagsearch_attack": {
		"en": "Attack", 
		"fr": "Attaque"},
	"tagsearch_spell": {
		"en": "Spell", 
		"fr": "Sort"},
	"tagsearch_dot": {
		"en": "DoT", 
		"fr": "Durée"},
	"tagsearch_proxy": {
		"en": "Proxy", 
		"fr": "Proxy"},
	"tagsearcg_trigger": {
		"en": "Trigger", 
		"fr": "Déclencheur"},
	"tagsearch_minion": {
		"en": "Minion", 
		"fr": "Créature"},
	"tagsearch_support": {
		"en": "Support", 
		"fr": "Soutien"},
	"tagsearch_dot_tooltip": {
		"en": "Damage over time are often slower to kill wave of monster but ramp up on boss.", 
		"fr": "Les dégâts sur la durée sont souvent plus lent à tuer des vagues de montres mais sont plus efficaces sur les boss."},
	"tagsearch_proxy_tooltip": {
		"en": "Use other entities that then use your offensives stats to deal damage. Gameplay is usually less nervous.", 
		"fr": "Utilise des entités qui vont ensuite utiliser vos caractéristiques offensives pour faire des dégâts. Le style de jeu est généralement moins nerveux."},
	"tagsearch_trigger_tooltip": { 
		"en": "Use mechanics to trigger other skills. Requires a lots of fine tuning to optimise", 
		"fr": "Utilise des mécaniques pour déclencher d'autres aptitudes. Requiert des configurations minutieuses pour l'optimisation."},
	"tagsearch_trap_tooltip": {
		"en": "Traps use your Offences but have their own Defences. When dealing damage, they are a different entity than you.", 
		"fr": "Les Pièges utilisent vos Stats offensives mais ont leurs Stats défensives. Quand ils infligent des dégâts, ils sont considérés comme une autre entité que vous."},
	"tagsearch_minion_tooltip": { 
		"en": "Minions are a different entity than you with their own Offences an Defences.", 
		"fr": "Les Créatures sont d'autre entités que vous avec leurs Stats offensives et défensives."},
	"tagsearch_support_tooltip": {
		"en": "Supports characters are not meant to do content solo but within a party.", 
		"fr": "Les personnages Soutiens ne sont pas sensé faire du contenu seul, mais en groupe."},
	"quality_Alternate1": {
		"en": "Anomalous",
		"fr": "Anormale"},
	"quality_Alternate2": {
		"en": "Divergent",
		"fr": "Divergente"},
	"quality_Alternate3": {
		"en": "Phantasmal",
		"fr": "Fantasmatique"},
	"time_component_y": {
		"fr": " années", 
		"en": " years"},
	"time_component_M": {
		"fr": " mois", 
		"en": " month"}, 
	"time_component_d": {
		"fr": " jours", 
		"en": " days"},
	"time_component_h": {
		"fr": " heures", 
		"en": " hours"},
	"time_component_m": {
		"fr": " minutes", 
		"en": " minutes"}, 
	"time_component_s": {
		"fr": " secondes", 
		"en": " seconds"},
	"inventoryslot_mainHand": {
		"fr": "Main principale",
		"en": "Main hand"},
	"inventoryslot_offHand": {
		"fr": "Main secondaire",
		"en": "Off hand"},
	"inventoryslot_mainHandSwap": {
		"fr": "Main principale - Permutation",
		"en": "Main hand - Swap"},
	"inventoryslot_offHandSwap": {
		"fr": "Main secondaire - Permutation",
		"en": "Off hand - Swap"},
	"inventoryslot_chest": {
		"fr": "Torse",
		"en": "Chest"},
	"inventoryslot_helm": {
		"fr": "Casque",
		"en": "Helm"},
	"inventoryslot_gloves": {
		"fr": "Gants",
		"en": "Gloves"},
	"inventoryslot_boots": {
		"fr": "Bottes",
		"en": "Boots"},
	"inventoryslot_amulet": {
		"fr": "Amulette",
		"en": "Amulet"},
	"inventoryslot_leftRing": {
		"fr": "Bague de gauche",
		"en": "Left ring"},
	"inventoryslot_rightRing": {
		"fr": "Bague de droite",
		"en": "Right ring"},
	"inventoryslot_belt": {
		"fr": "Ceinture",
		"en": "Belt"},
	"inventoryslot_none": {
		"fr": "Emplacement non-spécifié",
		"en": "Unknow slot"},
	"gemdescription_level": {
		"fr": "Niveau : ",
		"en": "Level: "},
	"gemdescription_quality": {
		"fr": "Qualité : ",
		"en": "Quality: "}
};

// Language selection
function selectLang(lang) {
	// Get only code A2 from browser lang
	if (lang.length > 2) lang = lang.substring(0,2).toLowerCase();
	localStorage.setItem("lang", lang);
	// Change style of flags
	for (let l of ["fr", "en"]) document.getElementById("lang_"+l).classList = "lang";
	document.getElementById("lang_"+lang).classList.add("selectedLang");
	// Load all div text
	for (let l of langTranslate) {
		if(document.getElementById(l._id)) document.getElementById(l._id).innerHTML = l[lang];
	}
	// Force reload on tree passives
	loadPassive = false;
	fetchTreeData(lang).then(data => waitForLoadAsync());
}